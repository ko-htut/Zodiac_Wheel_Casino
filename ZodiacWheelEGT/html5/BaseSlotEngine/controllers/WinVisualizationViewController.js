ViewController("WinVisualizationViewController",{ENTER_FREESPINS_SCENARIO_COMPLETE:"enterFreespinsScenarioComplete"},function(){function f(){GameSettings.getInstance().serverMessage.freeSpins&&!this._freespinScenarioComplete&&this._lineAnimationCycleEnded&&this._freeSpinSoundEnded&&(this._freespinScenarioComplete=!0,this.dispatchEvent(new Event(WinVisualizationViewController.ENTER_FREESPINS_SCENARIO_COMPLETE)))}function g(){this._lineAnimationCycleEnded=!0;f.call(this)}function l(){this._cardSoundPlaying=
!1;!GameSettings.getInstance().serverMessage.freeSpins&&this.allowCreditAnimationSound?this._winSoundChannel=SoundManager.getInstance().play("creditAnimationSound"):(this._freeSpinSoundEnded=!0,f.call(this))}return{init:function(){this._view;this._coinAnimation;this._winSoundChannel;this._freeSpinSoundEnded;this._lineAnimationCycleEnded;this._freespinScenarioComplete;this._lostConnection;this._cardSoundPlaying;this.allowCreditAnimationSound;this._super();var a=GameSettings.getInstance(),b=a.serverMessage,
f=new LinesViewConfig(a.lines,a.numReelCards,a.numReels,a.reelCoordX,a.reelCoordY,a.reelWidth,a.reelHeight,a.reelSpacing);this._view=new WinVisualizationView(new WinVisualizationViewConfig(b.reels,b.lines,b.scatters,a.wildIndex,null,a.denominations[a.currDenominationIndex][0],a.currency,a.currencyType,null,a.lineGame?a.localize("Line"):"",f,a.lineGame,a.comboColors,a.multiplierImages,a.noCoins));this._view.addEventListener(WinVisualizationView.CYCLE_COMPLETE,g,this);this._lostConnection=this._freespinScenarioComplete=
this._cardSoundPlaying=!1},stopBlinkX2:function(){this._view.stopBlinkX2()},getCardSoundPlaying:function(){return this._cardSoundPlaying},stopWinSound:function(){this._winSoundChannel=SoundManager.getInstance().stop(this._winSoundChannel)},start:function(){var a=GameSettings.getInstance(),b=a.serverMessage,g=SoundManager.getInstance();this._view.start(a.noSoundAndFastLineBlink);a.processingSubscribe?(this._freeSpinSoundEnded=this._lineAnimationCycleEnded=!0,f.call(this)):this._freeSpinSoundEnded=
this._lineAnimationCycleEnded=!1;this._cardSoundPlaying=!1;this.allowCreditAnimationSound=!0;if(!a.processingSubscribe&&!a.noSoundAndFastLineBlink){var d=null;if(b.freeSpins&&b.freeSpinScatters)for(var k=b.freeSpinScatters.length,e=0;e<k;e++){for(var c,m=a.scatterConfig.length,h=0;h<m;h++)if(b.freeSpinScatters[e]==a.scatterConfig[h].index){c=a.scatterConfig[h];break}if(c&&a.freespinSounds){d=a.freespinGame&&void 0!=c.freespinsSoundIndexInFs?a.freespinSounds[c.freespinsSoundIndexInFs]:a.freespinSounds[c.freespinsSoundIndex];
break}}else{c=SpinAnalyzer.getFullLineCard(b);b=SpinAnalyzer.getStrongestCard(b);if(-1!=c){d=null;k=a.winFullSounds.length;for(e=0;e<k;e++)if(a.winFullSounds[e].card==c){d=a.winFullSounds[e].name;break}d||(d=a.winSounds[c])}else d=a.winSounds[b];d&&(this._cardSoundPlaying=!0)}var n=this;this._winSoundChannel=g.play(d,!1,function(){l.call(n)})}},onLostConnection:function(){this._view.onLostConnection()},dispose:function(){this._winSoundChannel=SoundManager.getInstance().stop(this._winSoundChannel);
this._view.removeEventListener(WinVisualizationView.CYCLE_COMPLETE,g,this);this._super()}}}());
