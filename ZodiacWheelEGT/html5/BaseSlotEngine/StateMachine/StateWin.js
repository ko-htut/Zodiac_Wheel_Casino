function StateWin(a,c){this.spin=function(){var b=GameSettings.getInstance(),d=b.serverMessage;if(d.type!=BaseMessage.SPIN)throw'Invalid message type in "spin" command in StateWin!';if(a.getWinMoneyAnimating())throw'Invalid command "spin" while win money are animating in StateWin!';if(d.state==BaseMessage.STATE_IDLE||d.state==BaseMessage.STATE_FREESPIN)d.state==BaseMessage.STATE_IDLE&&b.balance<a.bet()?(c(StateMachineContext.STATE_IDLE),a.setInsufficientBalanceVisualState()):(c(StateMachineContext.STATE_WAITING_FOR_SPIN_RESULT),
a.setWaitingForSpinResultVisualState(),a.sendSpin());else if(d.state==BaseMessage.STATE_GAMBLE)b.balance+d.winAmount<a.bet()?(c(StateMachineContext.STATE_WAITING_FOR_COLLECT_RESULT),a.setInsufficientBalanceVisualState()):(c(StateMachineContext.STATE_WAITING_FOR_COLLECT_RESULT),a.setWaitingForSpinResultVisualState()),a.sendCollect();else throw'Invalid message state in "spin" command in StateWin!';};this.gamble=function(){var b=GameSettings.getInstance().serverMessage;if(b.type!=BaseMessage.SPIN)throw'Invalid message type in "gamble" command in StateWin!';
if(b.state!=BaseMessage.STATE_GAMBLE)throw"No gamble allowed in StateWin!";c(StateMachineContext.STATE_GAMBLE);a.showGamble()};this.jackpot=function(){var b=GameSettings.getInstance().serverMessage;if(b.type!=BaseMessage.SPIN)throw'Invalid message type in "jackpot" command in StateWin!';if(b.state!=BaseMessage.STATE_JACKPOT)throw"No jackpot allowed in StateWin!";c(StateMachineContext.STATE_JACKPOT);a.showJackpot()};this.collect=function(){var b=GameSettings.getInstance().serverMessage;if(b.type!=
BaseMessage.SPIN)throw'Invalid message type in "collect" command in StateWin!';if(a.getWinMoneyAnimating())throw'Invalid command "collect" while win money are animating in StateWin!';if(b.state==BaseMessage.STATE_IDLE)c(StateMachineContext.STATE_IDLE),a.setIdleVisualState();else if(b.state==BaseMessage.STATE_GAMBLE)c(StateMachineContext.STATE_WAITING_FOR_COLLECT_RESULT),a.setWaitingForCollectVisualState(),a.sendCollect();else throw'Invalid message state in "collect" command in StateWin!';};this.setResult=
function(){if(GameSettings.getInstance().balance<a.bet())throw Error('The balance should not be insufficient in command "setResult" in StateWin!');c(StateMachineContext.STATE_WAITING_FOR_CUSTOM_RESULT);a.setWaitingForSpinResultVisualState();a.sendCustomResult()};this.onResult=function(){throw'Invalid command "onResult" in StateWin!';};this.getState=function(){return StateMachineContext.STATE_WIN}};
